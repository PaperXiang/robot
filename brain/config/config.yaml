brain_node:
  ros__parameters:
    game:
      team_id: 29 # must be consistant with GameControl
      player_id: 1 # 1 | 2 | 3 | 4 | 5
      field_type: "adult_size" # adult_size | kid_size | robo_league
      player_role: "striker" # striker | goal_keeper
      treat_person_as_robot: false 
      number_of_players: 3
      
    robot:
      robot_height: 1.0 
      odom_factor: 1.2 
      vx_factor: 0.50 
      yaw_offset: 0.0 
      vx_limit: 1.0 
      vy_limit: 0.4
      vtheta_limit: 1.2 

    strategy:
      ball_confidence_threshold: 50.0 
      ball_memory_timeout: 5.0 
      tm_ball_dist_threshold: 2.0 
      limit_near_ball_speed: false 
      near_ball_speed_limit: 0.2 
      near_ball_range: 3.0
      abort_kick_when_ball_moved: true 
      cooperation: 
        enable_role_switch: false 
        ball_control_cost_threshold: 20.0 

    obstacle_avoidance:
      depth_sample_step: 16 
      obstacle_min_height: 0.35 
      grid_size: 0.2 
      max_x: 3.0 
      max_y: 5.0 
      exclusion_x: 0.3 
      exclusion_y: 0.4 
      ball_exclusion_radius: 0.0 
      ball_exclusion_height: 0.3 
      occupancy_threshold: 1 
      collision_threshold: 0.3 
      safe_distance: 2.0 
      avoid_secs: 3.0 
      enable_freekick_avoid: false 
      freekick_start_placing_safe_distance: 0.1 
      freekick_start_placing_avoid_secs: 2.5 
      obstacle_memory_msecs: 500. 
      avoid_during_kick: false 
      kick_ao_safe_dist: 3.0 
      kick_ao_use_shoot: false 
      avoid_during_chase: true 
      chase_ao_safe_dist: 3.5 

    locator:
      min_marker_count: 5
      max_residual: 0.3 

    enable_com: false 

    rerunLog:
      enable_tcp: false 
      server_ip: "127.0.0.1:9876" 
      enable_file: false 
      log_dir: "/home/booster/Workspace/rrlog"
      max_log_file_mins: 5.0 
      img_interval: 1 
    
    recovery:
      retry_max_count: 2

    vision:
        image_topic: "/camera/camera/color/image_raw" 
        depth_image_topic: "/camera/camera/aligned_depth_to_color/image_raw" 
        cam_pixel_width: 1280. 
        cam_pixel_height: 720. 
        cam_fov_x: 90.0 
        cam_fov_y: 60.0 
    
    game_control_ip: "127.0.0.1"

    # for fun and debug
    sound:
      enable: false 
      sound_pack: "espeak" 

    # ========== 新增: 感知系统优化配置 ==========
    # 基于论文《学习人形机器人的视觉驱动反应式足球技能》
    perception:
      # 虚拟感知系统参数 (论文3.4节)
      noise_std: 0.05                    # 位置噪声标准差(米)
      latency_ms: 50.0                   # 模拟延迟(毫秒)
      detection_rate_near: 0.95          # 近距离检测率
      detection_rate_far: 0.70           # 远距离检测率
      distance_threshold: 5.0            # 近/远距离阈值(米)
      
      # 多帧融合参数
      fusion_window: 5                   # 融合窗口大小
      kalman_process_noise: 0.01         # 卡尔曼过程噪声
      kalman_measurement_noise: 0.1      # 卡尔曼测量噪声
      
      # 滤波开关
      enable_noise_modeling: true        # 启用噪声建模
      enable_latency_simulation: false   # 延迟模拟(真实系统已有延迟,通常关闭)
      enable_detection_rate: true        # 启用检测率建模
      enable_fusion: true                # 启用多帧融合

    # ========== 新增: 反应式控制配置 ==========
    # 基于论文的感知-动作耦合思想
    reactive_control:
      enable: true                       # 启用反应式控制
      ball_track_distance: 3.0           # 反应式追踪距离阈值(米)
      reaction_time_ms: 100              # 目标反应时间(毫秒)
      observation_history_length: 50     # 观测历史长度 (RL论文建议50帧)
      
      # 主动视觉搜索
      enable_active_search: true         # 启用主动视觉搜索
      search_switch_interval: 1.0        # 搜索位置切换间隔(秒)
      
    # ========== 新增: 运动控制优化配置 ==========
    # 基于论文的对抗性运动先验(AMP)思想
    motion:
      # 轨迹平滑参数
      trajectory_smoothing: true         # 启用轨迹平滑
      smoothing_window: 3                # 平滑窗口大小
      
      # 踢球方向支持 (度数)
      kick_directions: [0, 30, -30, 45, -45, 90, -90]
      kick_selection_threshold: 15       # 方向选择阈值(度)
      
      # 地形自适应步态
      terrain_type: "grass"              # grass | concrete | soil | asphalt
      enable_terrain_adaptation: true    # 启用地形自适应
 